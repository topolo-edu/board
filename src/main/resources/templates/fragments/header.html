<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
<header th:fragment="header" class="bg-white shadow sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
        <a th:href="@{/}" class="text-2xl font-bold text-blue-600" th:text="#{main.title}">goorm board</a>
        <nav class="space-x-4 flex items-center">
            <a th:href="@{/posts}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.posts}">게시판</a>

            <!-- 관리자 메뉴 -->
            <div sec:authorize="hasRole('ADMIN')" class="contents">
                <a th:href="@{/admin/products}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.products}">상품관리</a>
                <a th:href="@{/admin/categories}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.categories}">카테고리관리</a>
                <a th:href="@{/admin/suppliers}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.suppliers}">공급업체관리</a>
                <a th:href="@{/admin/orders}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium">주문관리</a>
                <a th:href="@{/admin/inventory}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium">재고관리</a>
            </div>

            <!-- 바이어 메뉴 -->
            <div sec:authorize="hasRole('BUYER')" class="contents">
                <a th:href="@{/buyer/dashboard}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.buyer.dashboard}">바이어 대시보드</a>
                <a th:href="@{/buyer/orders}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.buyer.orders}">발주 관리</a>
            </div>

            <!-- 로그인하지 않은 경우 -->
            <div sec:authorize="isAnonymous()" class="space-x-4">
                <a th:href="@{/auth/signup}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.signup}">회원가입</a>
                <a th:href="@{/auth/login}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.login}">로그인</a>
            </div>

            <!-- 로그인한 경우 -->
            <div sec:authorize="isAuthenticated()" class="flex items-center space-x-4">
                <a th:href="@{/auth/profile}" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.profile}">프로필</a>
                <span class="text-gray-700" sec:authentication="principal.nickname">사용자</span><span class="text-gray-700" th:text="#{nav.user.greeting}">님</span>
                <form th:action="@{/auth/logout}" method="post" class="inline">
                    <button type="submit" class="px-4 py-2 text-gray-600 hover:text-blue-600 font-medium" th:text="#{nav.logout}">로그아웃</button>
                </form>
            </div>

            <!-- 언어 변경 (항상 마지막에 표시) -->
            <div class="flex items-center space-x-2 ml-4">
                <a th:href="@{?(lang='ko')}"
                   class="px-2 py-1 text-sm text-gray-600 hover:text-blue-600"
                   th:classappend="${#locale.language == 'ko'} ? 'font-bold text-blue-600' : ''"
                   th:text="#{nav.language.ko}">한국어</a>
                <span class="text-gray-400">|</span>
                <a th:href="@{?(lang='en')}"
                   class="px-2 py-1 text-sm text-gray-600 hover:text-blue-600"
                   th:classappend="${#locale.language == 'en'} ? 'font-bold text-blue-600' : ''"
                   th:text="#{nav.language.en}">English</a>
            </div>
        </nav>
    </div>
</header>
</body>
</html>