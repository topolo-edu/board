<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${buyer.buyerSeq != null ? '고객 수정' : '고객 등록'}">고객 등록/수정</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <div th:replace="~{fragments/header :: header}"></div>

    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- 페이지 헤더 -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900" th:text="${buyer.buyerSeq != null ? '고객 수정' : '고객 등록'}">고객 등록</h1>
                <p class="mt-2 text-gray-600" th:text="${buyer.buyerSeq != null ? '고객 정보를 수정합니다.' : '새로운 고객을 등록합니다.'}">새로운 고객을 등록합니다.</p>
            </div>

            <!-- 오류 메시지 -->
            <div th:if="${errorMessage}" class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded">
                <span th:text="${errorMessage}"></span>
            </div>

            <!-- 고객 등록/수정 폼 -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <form th:action="${buyer.buyerSeq != null ? '/buyers/' + buyer.buyerSeq : '/buyers'}"
                      method="post" th:object="${buyer}" class="space-y-6">

                    <!-- 기본 정보 섹션 -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-4" th:text="#{buyer.section.basic}">기본 정보</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="companyName" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.companyName}">회사명</label>
                                <input type="text" id="companyName" th:field="*{companyName}" required
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       th:classappend="${#fields.hasErrors('companyName')} ? 'border-red-500' : ''">
                                <div th:if="${#fields.hasErrors('companyName')}" class="mt-1 text-sm text-red-600">
                                    <span th:errors="*{companyName}"></span>
                                </div>
                            </div>
                            <div>
                                <label for="businessNumber" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.businessNumber}">사업자등록번호</label>
                                <input type="text" id="businessNumber" th:field="*{businessNumber}"
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       th:classappend="${#fields.hasErrors('businessNumber')} ? 'border-red-500' : ''">
                                <div th:if="${#fields.hasErrors('businessNumber')}" class="mt-1 text-sm text-red-600">
                                    <span th:errors="*{businessNumber}"></span>
                                </div>
                            </div>
                            <div>
                                <label for="contactPerson" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.contactPerson}">담당자</label>
                                <input type="text" id="contactPerson" th:field="*{contactPerson}"
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       th:classappend="${#fields.hasErrors('contactPerson')} ? 'border-red-500' : ''">
                                <div th:if="${#fields.hasErrors('contactPerson')}" class="mt-1 text-sm text-red-600">
                                    <span th:errors="*{contactPerson}"></span>
                                </div>
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.email}">이메일</label>
                                <input type="email" id="email" th:field="*{email}"
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       th:classappend="${#fields.hasErrors('email')} ? 'border-red-500' : ''">
                                <div th:if="${#fields.hasErrors('email')}" class="mt-1 text-sm text-red-600">
                                    <span th:errors="*{email}"></span>
                                </div>
                            </div>
                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.phone}">전화번호</label>
                                <input type="tel" id="phone" th:field="*{phone}"
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       th:classappend="${#fields.hasErrors('phone')} ? 'border-red-500' : ''">
                                <div th:if="${#fields.hasErrors('phone')}" class="mt-1 text-sm text-red-600">
                                    <span th:errors="*{phone}"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 거래 정보 섹션 -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-4" th:text="#{buyer.section.financial}">거래 정보</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label for="creditLimit" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.creditLimit}">신용한도</label>
                                <input type="number" id="creditLimit" th:field="*{creditLimit}" min="0" step="1000"
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       th:classappend="${#fields.hasErrors('creditLimit')} ? 'border-red-500' : ''">
                                <div th:if="${#fields.hasErrors('creditLimit')}" class="mt-1 text-sm text-red-600">
                                    <span th:errors="*{creditLimit}"></span>
                                </div>
                            </div>
                            <div>
                                <label for="discountRate" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.discountRate}">할인율(%)</label>
                                <input type="number" id="discountRate" th:field="*{discountRate}" min="0" max="100" step="0.1"
                                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       th:classappend="${#fields.hasErrors('discountRate')} ? 'border-red-500' : ''">
                                <div th:if="${#fields.hasErrors('discountRate')}" class="mt-1 text-sm text-red-600">
                                    <span th:errors="*{discountRate}"></span>
                                </div>
                            </div>
                            <div>
                                <label for="paymentTerms" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.paymentTerms}">결제조건</label>
                                <select id="paymentTerms" th:field="*{paymentTerms}"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="월말결제">월말결제</option>
                                    <option value="익월 10일">익월 10일</option>
                                    <option value="익월 20일">익월 20일</option>
                                    <option value="익월 말일">익월 말일</option>
                                    <option value="현금결제">현금결제</option>
                                </select>
                                <div th:if="${#fields.hasErrors('paymentTerms')}" class="mt-1 text-sm text-red-600">
                                    <span th:errors="*{paymentTerms}"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 주소 -->
                    <div>
                        <label for="address" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.address}">주소</label>
                        <input type="text" id="address" th:field="*{address}"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                               th:classappend="${#fields.hasErrors('address')} ? 'border-red-500' : ''">
                        <div th:if="${#fields.hasErrors('address')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{address}"></span>
                        </div>
                    </div>

                    <!-- 설명 -->
                    <div>
                        <label for="description" class="block text-sm font-medium text-gray-700 mb-1" th:text="#{buyer.field.description}">설명</label>
                        <textarea id="description" th:field="*{description}" rows="4"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                  th:classappend="${#fields.hasErrors('description')} ? 'border-red-500' : ''"
                                  placeholder="고객에 대한 추가 설명을 입력하세요"></textarea>
                        <div th:if="${#fields.hasErrors('description')}" class="mt-1 text-sm text-red-600">
                            <span th:errors="*{description}"></span>
                        </div>
                    </div>

                    <!-- 버튼 -->
                    <div class="flex justify-between pt-6">
                        <a th:href="@{/buyers}" class="bg-gray-600 text-white px-6 py-2 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">
                            <span th:text="#{common.cancel}">취소</span>
                        </a>
                        <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            <span th:text="${buyer.buyerSeq != null ? '수정' : '등록'}">등록</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>